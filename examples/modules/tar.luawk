BEGIN {
	local _getlines = getlines
	function getlines(file) {
		if (type(file) == "string" && file:match("%.tar$")) {
			file = io.popen("tar -tf " file:gsub("%W", "\\%0"))
		}
		return _getlines(file)
	}
}